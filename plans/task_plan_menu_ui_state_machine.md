# task_plan_menu_ui_state_machine

## Goal
新增独立菜单 UI（标题/信息/选关），并改为菜单与游戏双状态：游戏内 `q` 返回菜单，菜单内 `q` 才完整退出；启动默认从最新关卡进入游戏流程（菜单默认选中最新关卡）；移除 `pnpm start` 参数选关模式。

## Steps
- [x] 1. 重构输入映射为菜单态与游戏态两套命令。
- [x] 2. 新增菜单渲染视图，展示标题、信息、关卡列表和当前选择。
- [x] 3. 改造 `src/cli.ts` 状态机：菜单/游戏切换、`q` 语义分离、去除参数解析。
- [x] 4. 更新测试并跑 `type-check/test/lint`。

## Status
- completed: 1,2,3,4

## Risks
- 推测，待确认：菜单列表显示过长时可读性下降，需窗口化显示而非全量打印。

## Result
- 启动进入独立菜单 UI，默认选中最新关卡（当前第 10 关）。
- 菜单支持标题/信息/选关：`W/S` 或方向键上下选关，`Enter/N` 进入游戏。
- 游戏内 `q` 返回菜单；菜单内 `q` 才退出应用。
- 已移除 `pnpm start` 参数选关流程（`--level` / `--list-levels` 不再生效）。
